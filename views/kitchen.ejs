<!DOCTYPE html>
<html lang="en" ng-app="SKFanApp">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=0">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
	<title>饭掌柜系统</title>

    <!-- Bootstrap -->
    <link href="/renders/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
	<script type="text/javascript" src="http://ecafe.pub:9527/socket.io/socket.io.js"></script>
    <script src="/renders/angular/angular.min.js"></script>
    <script src="/renders/moment/moment.js"></script>
    <script src="/renders/moment/locale/zh-cn.js"></script>
    <script src="/renders/angular-moment/angular-moment.min.js"></script>
	<script src="/renders/soundmaster/soundmaster.min.js"></script>
  </head>
	<body>
		<div class="container-fluid" id="all" style="margin-top:50px" ng-controller="ListCtrl">
			<bgsound id="snd-sms" volume="-5000" loop="1" src="/renders/sms.wav" ng-if="browserIE">
			<span id="snd-sms" ng-if="!browserIE"></span>
			<div class="modal" id="modalConfirmDelete" ng-controller="modalCtrl">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
							<h4 class="modal-title">确定取消订单？</h4>
						</div>
						<div class="modal-body">
							{{order.name}}&times;{{order.count}}
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
							<button type="button" class="btn btn-danger" ng-click="cancel()" data-dismiss="modal">确定</button>
						</div>
					</div><!-- /.modal-content -->
				</div><!-- /.modal-dialog -->
			</div><!-- /.modal -->
			<div class="col-xs-12">
				<div class="panel panel-primary">
					<div class="panel-heading">
						<h1>
							<%= typeName %>当前订单：
							<button class="btn btn-lg btn-danger pull-right" onclick="location.href='/account/signout'">退出</button>
							<button class="btn btn-lg btn-default pull-right" style="margin-right:5px" 
								ng-click="full()" ng-hide="isInFullScreen">全屏</button> 
						</h1>
					</div>
					<div class="panel-body">
						<div class="container-fluid">
							<p ng-if="workingList.length == 0">目前还没有订单</p>
							<div class="col-xs-4 col-md-2 ng-cloak" ng-repeat-start="order in workingList track by $index" ng-cloak>
								<div class="thumbnail">
									<img class="img-responsive" ng-src="/image/{{order.image}}/middle" />
									<div class="caption">
										<h4>{{order.name}}</h4>
										<p>{{order.count}}份</p>
										<p class="text-info" am-time-ago="order.placeTime"></p>
										<p>
											<img ng-if="order.uid" style="height:20px" ng-src="/port/{{order.uid}}/thumb" />
											<span ng-if="order.nick" class="text-primary">{{order.nick}} 的订单</span>
										</p>
										<p ng-if="order.phone" class="well well-sm">联系方式： {{order.phone}}</p>
										<p ng-if="order.location" class="well well-sm">地点： {{order.location}}</p>
										<p ng-if="order.extra" class="well well-sm">选项： {{order.extra}}</p>
										<button class="btn btn-success" ng-click="remind(order.id)">完成</button> 
										<button class="btn btn-danger" ng-click="prepareCancel($index)" data-toggle="modal" data-target="#modalConfirmDelete">售罄</button>
									</div>
								</div>
							</div>
							<div class="clearfix visible-sm-block visible-xs-block" ng-if="($index + 1 ) % 3 == 0" ng-repeat-end></div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-xs-12" ng-if="pickingList.length > 0">
				<div class="panel panel-primary">
					<div class="panel-heading">
						<h1>
							已完成列表：
						</h1>
					</div>
					<div class="panel-body">
						<div class="container-fluid">
							<div class="col-xs-4 col-md-2 ng-cloak" ng-repeat-start="order in pickingList track by $index" ng-cloak>
								<div class="thumbnail">
									<img class="img-responsive" ng-src="/image/{{order.image}}/middle" />
									<div class="caption">
										<h4>{{order.name}}</h4>
										<p>{{order.count}}份</p>
										<p class="text-info" am-time-ago="order.placeTime"></p>
										<p>
											<img ng-if="order.uid" style="height:20px" ng-src="/port/{{order.uid}}/thumb" />
											<span ng-if="order.nick" class="text-primary">{{order.nick}} 的订单</span>
										</p>
										<p ng-if="order.phone" class="well well-sm">联系方式： {{order.phone}}</p>
										<p ng-if="order.location" class="well well-sm">地点： {{order.location}}</p>
									</div>
								</div>
							</div>
							<div class="clearfix visible-sm-block visible-xs-block" ng-if="($index + 1 ) % 3 == 0"></div>
							<div class="clearfix visible-md-block visible-lg-block" ng-if="($index + 1 ) % 6 == 0" ng-repeat-end></div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<footer class="text-center">
			<small class="text-muted">&copy;2015 intel成都</small>
		</footer>
		<script src="/js/jquery-1.11.2.min.js"></script>
		<script src="/renders/bootstrap/js/bootstrap.min.js"></script>
		<script>var type = <%= type %>;</script>
		<script src="/js/kitchen.js"></script>
	</body>
</html>
