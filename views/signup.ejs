<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Welcome to SKFan !</title>

    <!-- Bootstrap -->
    <link href="/renders/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link href="/css/cover.css" rel="stylesheet">
  </head>
  
  <body>

    <div class="site-wrapper">
		<div class="site-wrapper-inner">
			<div class="cover-container">
				<div class="masthead clearfix">
					<div class="inner">
						<h3 class="masthead-brand">SKFan</h3>
						<nav>
							<ul class="nav masthead-nav">
								<li><a href="/">Home</a></li>
								<li> &gt; </li>
								<li class="active"><a href="#">Sign up</a></li>
							</ul>
						</nav>
					</div>
				</div>

				<div class="inner cover">
					<div class="row">
						<p class="lead">Welcome to SKFan Intelligent food ordering system</p>
						<div class="col-md-8 col-md-offset-2">
							<h2 class="form-signin-heading">Fill the follow form to sign up</h2>
							<% include messages %>
							<form class="form-horizontal" method="post" action="signup" onsubmit="return signUp();" enctype="multipart/form-data">
								<div class="form-group">
									<input type="text" class="form-control" id="wwid" name="user[wwid]" placeholder="WWID" required autofocus>
								</div>
								<div class="form-group">
									<div class="input-group">
										<input type="text" class="form-control" id="email" name="user[email]" placeholder="Email" required>
										<div class="input-group-addon">@intel.com</div>
									</div>
								</div>
								<div class="form-group">
									<input type="text" class="form-control" id="nickname" name="user[nickname]" placeholder="Nick" required>
								</div>
								<div class="form-group">
									<input type="password" class="form-control" id="password" name="user[password]" placeholder="Password" required>
								</div>
								<div class="form-group">
									<input type="text" class="form-control" id="phone" name="user[phone]" placeholder="Phone" required>
									<div class="pull-left">
										(请输入手机号 ，用于接收取餐信息)
									</div>
								</div>
								<div class="form-group">									
									<div class="pull-center" id="">
										<img src="/images/logoFan.png" id="" alt="" title="" style="width:50px;height:50px;"/>
										<p>(关注公众号，接收取餐消息)</p>
									</div>
								</div>
								<div class="form-group left-text">
									<div class="pull-right">
										<label for="portrait">
											<button type="button" class="btn btn-sm" onclick="$('#portrait').click()">choose file</button>
										</label>
									</div>
									<input style="display:none;" type="file" id="portrait" name="user[portrait]">
									<div class="pull-left" id="lbUpload">
										upload portrait:
									</div>
								</div>
								<div class="form-group">
									<button type="submit" class="btn btn-lg btn-primary btn-block">Sign up</button>
								</div>
							</form>
						</div>
					</div>
				</div>

				<div class="mastfoot">
					<div class="inner">
						SKFan v0.0.1
					</div>
				</div>
			</div>
		</div>
		</div>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="/js/jquery-1.11.2.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/renders/bootstrap/js/bootstrap.min.js"></script>
    <script src="/js/common.js"></script>
    <script>
    	$("#portrait").on('change', function(){
    		$("#lbUpload").text("+portrait selected: " + $(this).val());
		});

		/********************account************************/
		function signUp(){
			var wwid = document.getElementById("wwid").value;
			var email = document.getElementById("email").value + "@intel.com";
			var nick = document.getElementById("nickname").value;
			var psd = document.getElementById("password").value;
			var phone = document.getElementById("phone").value;
			
			if(!isWWID(wwid)){
				alert("WWID格式不对!");
				return false;
				}
			else{
				if(!isEmail(email)){
					alert("Email格式不对!");
					return false;
				}
				else{
					if(!isPassword(psd)){
						alert("密码至少6位，请重新设定密码!");
						return false;
					}
					else{
						if(!isPhone(phone)){
							alert("手机号码格式不对!");
							return false;
						}
						else return true;
					}
				}
			}
		 
		}
	</script>
  </body>
</html>
